(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dd650646"],{"3e27":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"note-detail"},[n("TashSideBar",{directives:[{name:"show",rawName:"v-show",value:!t.currentNote.id,expression:"!currentNote.id"}],on:{"update:trashBooks":t.onTrashBooks,"update:notebooks":t.onNotebooks}}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.currentNote.id,expression:"currentNote.id"}],staticClass:"edit-content"},[n("h3",{staticClass:"note-title"},[t._v(t._s(t.currentNote.title))]),n("div",{staticClass:"about"},[n("ul",{staticClass:"crr"},[n("li",[t._v(t._s(t.username))]),n("li",[t._v("|")]),n("li",[t._v(t._s(t.notebook.title))]),n("li",[t._v("|")]),n("li",[t._v(t._s(t.currentNote.updatedAt))])]),n("ul",{staticClass:"navbar"},[n("li",{on:{click:t.deleate}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"彻底删除",placement:"bottom"}},[n("el-button",[n("Icon",{staticClass:"remove",attrs:{name:"remove"}})],1)],1)],1),n("li",{on:{click:t.resave}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"恢复",placement:"bottom"}},[n("el-button",[n("Icon",{staticClass:"save",attrs:{name:"save"}})],1)],1)],1)])]),n("div",{staticClass:"edit"},[t._v(" "+t._s(t.currentNote.content)+" "),n("div")])])],1)])},s=[],a=(n("7db0"),n("d3b7"),n("a434"),n("ac1f"),n("5319"),n("49c2")),r=(n("4e82"),n("159b"),n("5a0c")),i=n.n(r),c=n("2b7c"),u={GET:"/notes/trash",REVERT:"/notes/:noteId/revert",DELETE:"/notes/:noteId/confirm"},d={getAll:function(){return new Promise((function(t,e){return Object(c["a"])(u.GET).then((function(e){e.data=e.data.sort((function(t,e){return e.updatedAt<t.updatedAt})),e.data.forEach((function(t){var e=new Date(t.updatedAt).toISOString(),n=i()(e).format("MM-DD HH:mm");t.updatedAt=n})),t(e)})).catch((function(t){e(t)}))}))},deleteNote:function(t){var e=t.noteId;return Object(c["a"])(u.DELETE.replace(":noteId",e),"DELETE")},revertNote:function(t){var e=t.noteId;return Object(c["a"])(u.REVERT.replace(":noteId",e),"PATCH")}},l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"note-side-bar"},[n("ul",{staticClass:"note-detail"},[t._m(0),0==t.trashBooks.length?n("div",{staticClass:"no-notebook"},[n("span",[n("Icon",{attrs:{name:"remove"}})],1),n("span",[t._v("回收站为空")])]):t._l(t.trashBooks,(function(e){return n("router-link",{key:e.id,staticClass:"notes",attrs:{to:"/trash?noteId="+e.id}},[n("span",{staticClass:"names"},[n("Icon",{attrs:{name:"notes"}}),n("span",{staticClass:"title"},[t._v(t._s(e.title))])],1),n("span",[t._v(t._s(e.updatedAt))])])}))],2)])])},f=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"name"},[n("span",{staticClass:"title-name"},[t._v("名称")]),n("span",{staticClass:"update"},[t._v("删除时间")])])}],h=(n("d81d"),n("135c")),m=n("df3a"),p={component:{Avatar:m["a"]},data:function(){return{notebooks:[],notes:[],currentBook:{},currentNote:{},username:"",trashBooks:[],trashbookId:"",belongTo:""}},created:function(){var t=this;a["a"].getInfo().then((function(e){t.username=e.data.username})),h["a"].getAll().then((function(e){t.notebooks=e.data,t.belongTo=t.notebooks.map((function(t){return t.id})),t.$emit("update:notebooks",t.notebooks)})),d.getAll().then((function(e){t.trashBooks=e.data,t.$emit("update:trashBooks",t.trashBooks)}))},methods:{}},v=p,b=(n("6538"),n("2877")),g=Object(b["a"])(v,l,f,!1,null,"ecb2d422",null),k=g.exports,_={components:{TashSideBar:k},data:function(){return{notebooks:[],notebook:{},currentNote:{},username:"",isShowEdit:!1}},created:function(){var t=this;a["a"].getInfo().then((function(e){e.isLogin||t.$router.push({path:"/login"})})),a["a"].getInfo().then((function(e){t.username=e.data.username}))},beforeRouteUpdate:function(t,e,n){var o=this;this.currentNote=this.trashBooks.find((function(e){return e.id==t.query.noteId}))||{},n(),console.log(this.currentNote),this.notebook=this.notebooks.find((function(t){return t.id==o.currentNote.notebookId}))||{}},methods:{onTrashBooks:function(t){var e=this;this.trashBooks=t,this.currentNote=this.trashBooks.find((function(t){return t.id==e.$route.query.noteId}))},onNotebooks:function(t){this.notebooks=t},deleate:function(){var t=this;d.deleteNote({noteId:this.currentNote.id}).then((function(e){t.$message({type:"success",message:e.msg}),t.trashBooks.splice(t.trashBooks.indexOf(t.currentNote),1),t.$router.replace({path:"/trash"})})).catch((function(e){t.$message({type:"info",message:e.msg})}))},resave:function(){var t=this;d.revertNote({noteId:this.currentNote.id}).then((function(e){t.$router.replace({path:"/trash"}),t.$message({type:"success",message:e.msg})})).catch((function(e){t.$message({type:"info",message:data.msg})}))}}},I=_,E=(n("85c0"),Object(b["a"])(I,o,s,!1,null,"739729ed",null));e["default"]=E.exports},"49c2":function(t,e,n){"use strict";var o=n("2b7c"),s={REGISTER:"/auth/register",LOGIN:"/auth/login",LOGOUT:"/auth/logout",GET_INFO:"/auth"};e["a"]={register:function(t){var e=t.username,n=t.password;return Object(o["a"])(s.REGISTER,"post",{username:e,password:n})},login:function(t){var e=t.username,n=t.password;return Object(o["a"])(s.LOGIN,"post",{username:e,password:n})},logout:function(){return Object(o["a"])(s.LOGOUT)},getInfo:function(){return Object(o["a"])(s.GET_INFO)}}},6538:function(t,e,n){"use strict";n("f43e")},8418:function(t,e,n){"use strict";var o=n("a04b"),s=n("9bf2"),a=n("5c6c");t.exports=function(t,e,n){var r=o(e);r in t?s.f(t,r,a(0,n)):t[r]=n}},"85c0":function(t,e,n){"use strict";n("b179")},"8adf":function(t,e,n){},"90e8":function(t,e,n){"use strict";var o=n("2b0e");e["a"]=new o["default"]},"99f9":function(t,e,n){"use strict";n("8adf")},a434:function(t,e,n){"use strict";var o=n("23e7"),s=n("da84"),a=n("23cb"),r=n("5926"),i=n("07fa"),c=n("7b0b"),u=n("65f0"),d=n("8418"),l=n("1dde"),f=l("splice"),h=s.TypeError,m=Math.max,p=Math.min,v=9007199254740991,b="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!f},{splice:function(t,e){var n,o,s,l,f,g,k=c(this),_=i(k),I=a(t,_),E=arguments.length;if(0===E?n=o=0:1===E?(n=0,o=_-I):(n=E-2,o=p(m(r(e),0),_-I)),_+n-o>v)throw h(b);for(s=u(k,o),l=0;l<o;l++)f=I+l,f in k&&d(s,l,k[f]);if(s.length=o,n<o){for(l=I;l<_-o;l++)f=l+o,g=l+n,f in k?k[g]=k[f]:delete k[g];for(l=_;l>_-o+n;l--)delete k[l-1]}else if(n>o)for(l=_-o;l>I;l--)f=l+o-1,g=l+n-1,f in k?k[g]=k[f]:delete k[g];for(l=0;l<n;l++)k[l+I]=arguments[l+2];return k.length=_-o+n,s}})},b179:function(t,e,n){},d81d:function(t,e,n){"use strict";var o=n("23e7"),s=n("b727").map,a=n("1dde"),r=a("map");o({target:"Array",proto:!0,forced:!r},{map:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},df3a:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{attrs:{title:t.username}},[t._v(t._s(t.slug))])},s=[],a=n("49c2"),r=n("90e8"),i={data:function(){return{username:"未登录"}},created:function(){var t=this;r["a"].$on("userInfo",(function(e){t.username=e.username})),a["a"].getInfo().then((function(e){e.isLogin&&(t.username=e.data.username)})),console.log("----------------------")},computed:{slug:function(){return this.username.charAt(0)}}},c=i,u=(n("99f9"),n("2877")),d=Object(u["a"])(c,o,s,!1,null,"5d2e3dca",null);e["a"]=d.exports},f43e:function(t,e,n){}}]);
//# sourceMappingURL=chunk-dd650646.e825aeb1.js.map